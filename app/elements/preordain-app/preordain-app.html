<!-- Routes live beside the app -->
<link rel="import" href="routing.html">

<dom-module id="preordain-app">

  <template>

    <iron-media-query query="(min-width: 840px)" query-matches="{{big}}"></iron-media-query>

    <iron-media-query query="(max-width: 840px)" query-matches="{{small}}"></iron-media-query>

    <paper-drawer-panel id="paperDrawerPanel" responsive-width="840px">
      <div class="vertical layout" drawer>

        <!-- Drawer Toolbar -->
        <paper-toolbar id="drawerToolbar">
          <span class="paper-font-title">Menu</span>
        </paper-toolbar>

        <!-- Drawer Content -->
          <paper-menu class="list" attr-for-selected="data-route" selected="{{route}}" on-iron-select="onMenuSelect">
              <a data-route="home" href="/">
                <iron-icon icon="home"></iron-icon>
                <span>Home</span>
              </a>

              <a data-route="login" href="/login">
                <iron-icon icon="info"></iron-icon>
                <span>Sign in</span>
              </a>

              <a data-route="trades" href="/trades">
                <iron-icon icon="info"></iron-icon>
                <span>Trades</span>
              </a>

              <a data-route="sets" href="/sets">
                <iron-icon icon="info"></iron-icon>
                <span>Set List</span>
              </a>
          </paper-menu>

          <div class="flex"></div>

          <preordain-source-selector></preordain-source-selector>

      </div>
      <paper-header-panel main mode="seamed">

        <!-- Main Toolbar -->
        <paper-toolbar id="mainToolbar">
          <paper-icon-button id="paperToggle" icon="menu" paper-drawer-toggle></paper-icon-button>


          <!-- App Name, possibility for a subtitle -->
          <template is="dom-if" if="{{big}}">
            <div class="vertical layout">
              <div class="paper-font-headline">Preorda.in</div>
            </div>
            <span class="flex"></span>
          </template>

          <span class="layout center">
            <preordain-typeahead show-sets show-prices
            on-completed="typeaheadCompleted"></preordain-typeahead>
          </span>

          <!-- Toolbar icons -->
          <div>
            <paper-icon-button icon="search"></paper-icon-button>
          </div>
        </paper-toolbar>

        <!-- Main Content -->
        <div class="content">
          <iron-pages attr-for-selected="data-route" selected="{{route}}">

            <section data-route="home">
              <paper-material elevation="1">
                This is home, it could use some work!
              </paper-material>
            </section>

            <section data-route="card">
              <template is="dom-if" if="[[cardViewed]]">
                <preordain-card-view
                name="[[cardParams.name]]"
                set="[[cardParams.set]]"></preordain-card-view>
              </template>
            </section>

            <section data-route="set">
              <template is="dom-if" if="[[setViewed]]">
                <preordain-set-view name="[[setParams.set]]"
                on-request-card="cardRequested"
                ></preordain-set-view>
              </template>
            </section>

            <section data-route="sets">
              <template is="dom-if" if="[[setsViewed]]">
                <preordain-set-list
                on-request-set="setRequested"
                ></preordain-set-list>
              </template>
            </section>

            <section data-route="login">
              <template is="dom-if" if="[[loginViewed]]">
                <paper-material elevation="1">
                  <user-login></user-login>
                </paper-material>
              </template>
            </section>

            <section data-route="signup">
              <template is="dom-if" if="[[signupViewed]]">
                <paper-material elevation="1">
                  <user-signup></user-signup>
                </paper-material>
              </template>
            </section>

            <section data-route="trades">
              <template is="dom-if" if="[[tradesViewed]]">
                <preordain-trade-view name="[[tradesParams.name]]"></preordain-trade-view>
              </template>
            </section>

            <section data-route="reset">
              <template is="dom-if" if="[[resetViewed]]">
                <paper-material elevation="1">
                  <user-reset name="[[resetParams.name]]"></user-reset>
                </paper-material>
              </template>
            </section>

          </iron-pages>
        </div>
      </paper-header-panel>
    </paper-drawer-panel>

  </template>

  <style>
  /*Yeah, this is app-theme copy-pasted. I hate it but it works*/

     :root {
      --dark-primary-color:       #00796B;
      --default-primary-color:    #009688;
      --light-primary-color:      #B2DFDB;
      --text-primary-color:       #FFFFFF;
      --accent-color:             #FF9800;
      --primary-background-color: #B2DFDB;
      --primary-text-color:       #212121;
      --secondary-text-color:     #727272;
      --disabled-text-color:      #BDBDBD;
      --divider-color:            #B6B6B6;

      /* Components */

      /* paper-drawer-panel */
      --drawer-menu-color: #ffffff;
      --drawer-border-color: 1px solid #ccc;
      --drawer-toolbar-border-color: 1px solid rgba(0, 0, 0, 0.22);

      /* paper-menu */
      --paper-menu-background-color: #fff;
      --menu-link-color: #111111;
    }

    /* General styles */

    #drawerToolbar {
      color: var(--secondary-text-color);
      background-color: var(--drawer-menu-color);
      border-bottom: var(--drawer-toolbar-border-color);
      height: 64px;
    }

    paper-material {
      border-radius: 2px;
      height: 100%;
      padding: 16px 0 16px 0;
      width: calc(98.66% - 16px);
      margin: 16px auto;
      background: white;
    }

    paper-menu iron-icon {
      margin-right: 33px;
      opacity: 0.54;
    }

    .paper-menu > .iron-selected {
      color: var(--default-primary-color);
    }

    paper-menu a {
      text-decoration: none;
      color: var(--menu-link-color);
      display: -ms-flexbox;
      display: -webkit-flex;
      display: flex;
      -ms-flex-direction: row;
      -webkit-flex-direction: row;
      flex-direction: row;
      -ms-flex-align: center;
      -webkit-align-items: center;
      align-items: center;
      font-family: 'Roboto', 'Noto', sans-serif;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
      font-size: 14px;
      font-weight: 400;
      line-height: 24px;
      min-height: 48px;
      padding: 0 16px;
    }

    #mainToolbar .middle {
      margin-left: 48px;
    }

    #mainToolbar.has-shadow .middle {
      font-size: 20px;
      padding-bottom: 0;
      margin-left: 48px;
    }

    /* Breakpoints */

    /* Small */
    @media (max-width: 600px) {

      paper-material {
        --menu-container-display: none;
        width: calc(97.33% - 32px);
        padding-left: 16px;
        padding-right: 16px;
      }

      .paper-font-display1 {
        font-size: 12px;
      }

      .app-name {
        font-size: 26px;
      }

      #drawer .paper-toolbar {
        margin-left: 16px;
      }

      #overlay {
        min-width: 360px;
      }

      .bg {
        background: white;
      }

    }

    /* Tablet+ */
    @media (min-width: 601px) {

      paper-material {
        width: calc(98% - 46px);
        margin-bottom: 32px;
        padding-left: 30px;
        padding-right: 30px;
      }

      #drawer.paper-drawer-panel > [drawer] {
        border-right: 1px solid rgba(0, 0, 0, 0.14);
      }

      iron-pages {
        padding: 1em 1em;
      }

    }

    /* Material Design Adaptive Breakpoints */
    /*
      Below you'll find CSS media queries based on the breakpoint guidance
      published by the Material Design team. You can choose to use, customise
      or remove these breakpoints based on your needs.

      http://www.google.com/design/spec/layout/adaptive-ui.html#adaptive-ui-breakpoints
     */

    /* mobile-small */
    @media all and (min-width: 0) and (max-width: 360px) and (orientation: portrait) { }
    /* mobile-large */
    @media all and (min-width: 361px) and (orientation: portrait) { }
    /* mobile-small-landscape */
    @media all and (min-width: 0) and (max-width: 480px) and (orientation: landscape) { }
    /* mobile-large-landscape */
    @media all and (min-width: 481px) and (orientation: landscape) { }
    /* tablet-small-landscape */
    @media all and (min-width: 600px) and (max-width: 960px) and (orientation: landscape) { }
    /* tablet-large-landscape */
    @media all and (min-width: 961px) and (orientation: landscape) { }
    /* tablet-small */
    @media all and (min-width: 600px) and (orientation: portrait) { }
    /* tablet-large */
    @media all and (min-width: 601px) and (max-width: 840px) and (orientation : portrait) { }
    /* desktop-x-small-landscape */
    @media all and (min-width: 0) and (max-width: 480px) and (orientation: landscape) { }
    /* desktop-x-small */
    @media all and (min-width: 0) and (max-width: 480px) and (max-aspect-ratio: 4/3) { }
    /* desktop-small-landscape */
    @media all and (min-width: 481px) and (max-width: 840px) and (orientation: landscape) { }
    /* desktop-small */
    @media all and (min-width: 481px) and (max-width: 840px) and (max-aspect-ratio: 4/3) { }
    /* desktop-medium-landscape */
    @media all and (min-width: 841px) and (max-width: 1280px) and (orientation: landscape) { }
    /* desktop-medium */
    @media all and (min-width: 841px) and (max-width: 1280px) and (max-aspect-ratio: 4/3) { }
    /* desktop-large */
    @media all and (min-width: 1281px) and (max-width: 1600px) { }
    /* desktop-xlarge */
    @media all and (min-width: 1601px) and (max-width: 1920px) { }


  </style>

</dom-module>

<script src="preordain-app.js"></script>