<!-- We use a custom element for templating our trades -->
<link rel="import" href="misc-user-trade/misc-user-trade.html">


<dom-module id="user-trades">

  <style>
    :host{
      display: block;
    }

    mtg-set-symbol{
      width: 2em;
      height: 2em;
    }

    preordain-price{
      display: inline;
    }

    table{
      table-layout: fixed;
      display: block;
    }

    /*Spacing between trades*/
    tbody::after{
      content: '';
      margin-bottom: 1.5em;
      display: block;
    }

  </style>

  <template>

    <!--
     Every trade should line up for readability, using a table makes this
     possible.
    -->
    <table>
        <template is="dom-repeat" items="[[_trades]]">
          <tbody>
            <!-- Info, colspan>=number of other cells -->
            <tr>
              <td colspan="10">
                <span class="paper-font-headline">[[item.TimeString]]</span>
              </td>
            </tr>

            <tr>
              <!-- Set -->
             <th></th> 
              <!-- Name -->
             <th></th>
             <!-- Padding -->
             <th></th>
             <!-- Actual headers! -->
             <th>Then</th>
             <th>Now</th>
           </tr>

            <template is="dom-repeat" items="[[item]]">
              <!-- Content -->
              <tr>
                <td><mtg-set-symbol set="[[item.Set]]"></mtg-set-symbol></td>
                <td>[[item.Name]]</td>
                <td class="tablePadding"></td>
                <td>
                  <preordain-price multiplier="[[item.Quantity]]">
                    <price-closest name="[[item.Name]]"
                                   set="[[item.Set]]"
                                   closest="[[item.TimeInt]]"
                    ></price-closest>
                  </preordain-price>
                </td>
                <td>
                  <preordain-price multiplier="[[item.Quantity]]">
                    <price-latest name="[[item.Name]]" set="[[item.Set]]"></price-latest>
                  </preordain-price>
                </td>
              </tr>
              <!-- <misc-user-trade items="[[item]]"></misc-user-trade> -->
            </template>

            <tr>
              <!-- Set -->
              <td></td>
              <!-- Name -->
              <td></td>
              <!-- Padding -->
              <td></td>
              <!-- Actual prices! -->
              <td>
                <preordain-price>
                  <user-trade-summed cards="[[item]]" use-date></user-trade-summed>
                </preordain-price>
              </td>
              <td>
                <preordain-price>
                  <user-trade-summed cards="[[item]]"></user-trade-summed>
                </preordain-price>
              </td>
            </tr>

            <!-- Comment -->
            <tr>
              <td colspan="10">
                <template is="dom-repeat" items="[[item.CommentLines]]">
                  
                  <div class="paper-font-caption">[[item]]</div>

                </template>
              </td>
            </tr>
          </tbody>
        </template>
    </table>

  </template>

</dom-module>

<script src="user-trades.js"></script>
